<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<!--<title></title>-->

	<style>

p { line-height: 1.5; }

/* thanks https://www.tpgi.com/the-anatomy-of-visually-hidden/#where-we-came-in */
.visually-hidden:not(:focus):not(:active) {
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

[data-ssml] {
	outline: 2px dashed rgb(150,150,150);
}

table.ssml-table {
	border-collapse: collapse;
	width: 100%;
	margin-top: 1em;
}

table.ssml-table th,
table.ssml-table td {
	border: 1px solid #ccc;
	padding: 8px 12px;
	text-align: left;
	vertical-align: top;
}

table.ssml-table th {
	background-color: #f4f4f4;
}

	</style>

	<script>

function scrollWithGap(elem, gap = 40) {
	let rect = elem.getBoundingClientRect();
	let isBelow = rect.bottom > window.innerHeight - gap;
	let isAbove = rect.top < gap;

	if (isBelow || isAbove) {
		window.scrollBy({
			top: isBelow ? rect.bottom - window.innerHeight + gap : rect.top - gap,
			left: 0,
			/* used to do "behavior: 'smooth'" here, but it caused NVDA's focus indicator to not match the browser's focus indicator, which, I think, was not the best for demo videos. */
		});
	}
}

window.addEventListener("load", function(event) {
	document.addEventListener('focusin', (e) => {
		scrollWithGap(e.target);
	});

	if(false) { 
		let repeat = 70;
		let chars = [
			'\uFFF9', 
			'\u200C', 
			'\u200D',
			'\u2060',
			'\u2061',
			'\uFEFF',
			'\u2063',
			'\u2064',
			'\uFFFB',
			'\uFFFA',
			'\u206A',
			'\u206B',
			'\u206C',
			'\u206D',
			'\u206E',
			'\u206F', 
		];
		let div = document.createElement("div");
		div.textContent = 'This is a test for getting a lot of characters from the DOM.  4b9b696c-8fc8-49ca-9bb9-73afc9bd95f7 ';
		for (let c of chars) {
			let codePoint = c.codePointAt(0).toString(16).toUpperCase().padStart(4, '0');
			div.textContent += c.repeat(repeat);
		}
		div.textContent += 'end of test.';
		document.body.appendChild(div);

	}
});

	</script>

	<script	src="nvda-add-on-data-ssml.js"></script>

</head>




<body>
<main>


<h3>page-wide-override</h3>	

<ol>
	<div style="display: none">
		<span data-ssml='{"sub": {"alias": "yes"}}'>def</span>
		<span data-ssml='{"sub": {"alias": "yes"}}'>def</span> <!-- will not log a warning -->
		<span data-ssml='{"sub": {"alias": "no failure no"}}'>def</span> <!-- will log a warning -->
	</div>
	<li>abcdefghi  (desired behavior: don't override)
	<li>abc<span>def</span>ghi  (desired behavior: don't override)
	<li>abc<span style="margin: 0.3em">def</span>ghi  (desired behavior: don't override, but it's borderline)
	<li>abc defghi  (desired behavior: don't override)
	<li>abc <span>def</span> ghi  (desired behavior: override)
	<li>abc def ghi  (desired behavior: override)
	<li>abc<div>def</div>ghi  (desired behavior: override)
	<li>abc pre-def ghi  (desired behavior: override)
	<li>abc def/ghi  (desired behavior: override)
	<li>abc"def"ghi  (desired behavior: override)
	<li>def def def (desired behavior: override)</li>
	<li>def</li>
	<li> (^^ desired behavior: override)</li>
</ol>



</main>


</body>

</html>
